jQuery(document).ready(function(e){var t;e(".job_listings").on("update_results",function(n,r,i){var s=e(this),o=s.find(".job_filters"),u=s.find(".showing_jobs"),a=s.find(".job_listings");t&&t.abort();if(i)e(".load_more_jobs",s).addClass("loading");else{e(a).addClass("loading");e("li.job_listing",a).css("visibility","hidden")}var f=new Array;e(':input[name="filter_job_type[]"]:checked',o).each(function(){f.push(e(this).val())});var l=o.find(":input[name^=search_categories], :input[name^=search_categories]").map(function(){return e(this).val()}).get(),c="",h="",p=o.find(":input[name=search_keywords]"),d=o.find(":input[name=search_location]");p.val()!=p.attr("placeholder")&&(c=p.val());d.val()!=d.attr("placeholder")&&(h=d.val());var v={action:"job_manager_get_listings",search_keywords:c,search_location:h,search_categories:l,filter_job_type:f,per_page:o.find(":input[name=per_page]").val(),orderby:o.find(":input[name=orderby]").val(),order:o.find(":input[name=order]").val(),page:r,form_data:o.serialize()};t=e.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url,data:v,success:function(t){if(t)try{t.indexOf("<!--WPJM-->")>=0&&(t=t.split("<!--WPJM-->")[1]);t.indexOf("<!--WPJM_END-->")>=0&&(t=t.split("<!--WPJM_END-->")[0]);var n=e.parseJSON(t);n.showing?e(u).show().html("").append("<span>"+n.showing+"</span>"+n.showing_links):e(u).hide();n.html&&(i?e(a).append(n.html):e(a).html(n.html));!n.found_jobs||n.max_num_pages==r?e(".load_more_jobs",s).hide():e(".load_more_jobs",s).show().data("page",r);e(a).removeClass("loading");e(".load_more_jobs",s).removeClass("loading");e("li.job_listing",a).css("visibility","visible")}catch(o){console.log(o)}}})});e("#search_keywords, #search_location, .job_types input, #search_categories").change(function(){var t=e(this).closest("div.job_listings");t.trigger("update_results",[1,!1])}).change();e(".job_filters").on("click",".reset",function(){var t=e(this).closest("div.job_listings"),n=e(this).closest("form");n.find(":input[name=search_keywords]").val("");n.find(":input[name=search_location]").val("");n.find(":input[name^=search_categories]").val("");e(':input[name="filter_job_type[]"]',n).attr("checked","checked");t.trigger("reset");t.trigger("update_results",[1,!1]);return!1});e(".load_more_jobs").click(function(){var t=e(this).closest("div.job_listings"),n=e(this).data("page");n?n=parseInt(n):n=1;e(this).data("page",n+1);t.trigger("update_results",[n+1,!0]);return!1})});